# Full Repo Code Review Plan

Date: 2025.12.31
Scope: mdmdview repository code review

## Code Inventory (All Executable/Config Code)

### Rust (Core)
- Cargo.toml
- build.rs
- analyze_text.rs
- navigation_tests_backup.rs
- examples/gen_webp.rs
- src/main.rs
- src/lib.rs
- src/app.rs
- src/markdown_renderer.rs
- src/mermaid_renderer.rs
- src/image_decode.rs
- src/sample_files.rs
- src/emoji_assets.rs
- src/emoji_catalog.rs
- src/window_state.rs
- src/table_support/mod.rs
- src/table_support/metrics.rs
- src/table_support/column_spec.rs

### Python / Tooling
- tools/regression/runner.py
- tools/regression/reference_renderer.py
- tools/mermaid_visual_check.py

### Test/Config Manifests
- tests/regression/manifest.toml
- tools/regression/requirements.txt

### Non-code (review for documentation consistency only)
- README.md
- docs/*.md
- wrk_docs/*.md (existing reports/plans)

## Review Factors
- Correctness and edge cases
- Error handling and resiliency
- Safety (panic paths, unsafe usage, input validation)
- Performance and memory behavior
- Concurrency and UI responsiveness
- Security and sandboxing concerns
- Test coverage alignment with risk
- Documentation and developer experience

## Review Stages
1) Project entrypoints and build
   - Cargo.toml, build.rs, src/main.rs, src/lib.rs
   - Look for build-time assumptions, feature flags, platform constraints

2) Core UI and state management
   - src/app.rs, src/window_state.rs
   - Check event handling, rendering loops, resource cleanup, config/env handling

3) Markdown rendering and content pipeline
   - src/markdown_renderer.rs, src/sample_files.rs
   - Validate parsing logic, rendering control flow, error recovery, untrusted input

4) Mermaid rendering and image decode
   - src/mermaid_renderer.rs, src/image_decode.rs
   - Verify renderer selection logic, background/theme handling, caching, SVG/bitmap paths

5) Tables and layout metrics
   - src/table_support/*
   - Confirm column metrics, wrapping behavior, edge cases

6) Emoji assets and catalog
   - src/emoji_assets.rs, src/emoji_catalog.rs
   - Validate mapping, bounds checks, asset loading fallback

7) Tools and scripts
   - analyze_text.rs, navigation_tests_backup.rs, examples/gen_webp.rs
   - tools/regression/*.py, tools/mermaid_visual_check.py
   - Verify CLI usage, error handling, temp output, file safety

8) Tests and manifests
   - tests/regression/manifest.toml, tools/regression/requirements.txt
   - Confirm coverage adequacy and reproducibility

9) Synthesis
   - Aggregate findings by severity
   - Provide prioritized fixes and testing recommendations

## Deliverables
- Detailed review report with findings, risks, and recommendations
- References to specific files and code areas
