# mdmdview Code Review Plan

## Overview

**Project**: mdmdview - Standalone Markdown Viewer for Windows
**Language**: Rust
**Framework**: egui (immediate mode GUI)
**Review Date**: 2026-01-10
**Reviewer**: Claude Code

## Source Files to Review

### Core Application
| File | Size | Description |
|------|------|-------------|
| `src/main.rs` | ~400 lines | Application entry point, window configuration |
| `src/lib.rs` | ~20 lines | Library exports |
| `src/app.rs` | ~2100 lines | Main application logic, UI, navigation |

### Rendering Engine
| File | Size | Description |
|------|------|-------------|
| `src/markdown_renderer.rs` | ~337KB | Markdown parsing and rendering |
| `src/mermaid_renderer.rs` | ~191KB | Mermaid diagram rendering (QuickJS) |
| `src/image_decode.rs` | ~224 lines | Image decoding (raster + SVG) |

### Support Modules
| File | Size | Description |
|------|------|-------------|
| `src/window_state.rs` | ~350 lines | Window state persistence |
| `src/sample_files.rs` | ~350 lines | Embedded sample markdown |
| `src/emoji_catalog.rs` | ~160 lines | Emoji shortcode mapping |
| `src/emoji_assets.rs` | ~205 lines | Emoji vector rendering fallbacks |

### Table Support Module
| File | Size | Description |
|------|------|-------------|
| `src/table_support/mod.rs` | ~10 lines | Module exports |
| `src/table_support/metrics.rs` | ~300 lines | Table metrics and caching |
| `src/table_support/column_spec.rs` | ~1050 lines | Column width calculation |

### Build Configuration
| File | Size | Description |
|------|------|-------------|
| `Cargo.toml` | ~85 lines | Project configuration |
| `build.rs` | ~145 lines | Build script |

## Review Categories

### 1. Code Quality
- [ ] Code organization and modularity
- [ ] Naming conventions and readability
- [ ] Error handling patterns
- [ ] Documentation coverage
- [ ] Dead code and unused imports

### 2. Architecture
- [ ] Module boundaries and coupling
- [ ] Data flow and state management
- [ ] Separation of concerns
- [ ] Extensibility patterns

### 3. Performance
- [ ] Memory allocation patterns
- [ ] Caching strategies
- [ ] Async/threading usage
- [ ] Hot path optimization

### 4. Safety and Correctness
- [ ] Unsafe code usage
- [ ] Error propagation
- [ ] Resource management (files, textures)
- [ ] Thread safety

### 5. Testing
- [ ] Test coverage
- [ ] Test quality and patterns
- [ ] Edge case handling

### 6. Security
- [ ] Input validation
- [ ] File path handling
- [ ] External content handling (URLs, images)

### 7. Maintainability
- [ ] Technical debt
- [ ] Code duplication
- [ ] Complexity hotspots
- [ ] Dependencies health

## Review Order

1. Build configuration (Cargo.toml, build.rs)
2. Entry point (main.rs, lib.rs)
3. Core application (app.rs)
4. Markdown renderer (markdown_renderer.rs)
5. Mermaid renderer (mermaid_renderer.rs)
6. Support modules (window_state, sample_files, emoji, image_decode)
7. Table support module
8. Cross-cutting concerns

## Deliverable

Final report saved to: `wrk_docs/2026.01.10 - CR - mdmdview Comprehensive Code Review.md`
