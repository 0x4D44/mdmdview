# 2026.01.11 - Branch Coverage Report

## Context
- Repo: mdmdview
- Commit: 2d3012d (working tree dirty: src/app.rs, src/markdown_renderer.rs, src/mermaid_renderer.rs, src/sample_files.rs, wrk_journals/2026.01.09 - JRN - Mermaid ER + Gantt Polish.md, nul, tests/mermaid_visual/review_pack/2026.01.10-mindmap/)
- Toolchain: rustc 1.93.0-nightly (6647be936 2025-11-09)
- cargo-llvm-cov: 0.6.21
- Command: `$env:PATH = "C:\Program Files\Git\usr\bin;$env:PATH"; cargo +nightly llvm-cov --branch`

## Execution Notes
- Initial run failed due to missing `patch` in PATH for the `rquickjs-sys` build script.
- Rerun succeeded after prepending Git for Windows `patch.exe` to PATH.
- `cargo-llvm-cov` warning: 1 functions have mismatched data.

## Coverage Summary (Totals)
- Regions: 26386 total, 2564 missed, 90.28% covered
- Functions: 1387 total, 168 missed, 87.89% covered
- Lines: 16024 total, 1162 missed, 92.75% covered
- Branches: 2337 total, 601 missed, 74.28% covered

## Per-File Coverage (src/)
| File | Regions | Functions | Lines | Branches |
| --- | --- | --- | --- | --- |
| src/app.rs | 94.75% (332/6320 missed) | 95.60% (15/341 missed) | 97.11% (118/4089 missed) | 83.56% (95/578 missed) |
| src/emoji_assets.rs | 98.18% (5/274 missed) | 100.00% (0/13 missed) | 100.00% (0/159 missed) | 73.53% (9/34 missed) |
| src/emoji_catalog.rs | 100.00% (0/127 missed) | 100.00% (0/6 missed) | 100.00% (0/139 missed) | n/a (no branches) |
| src/image_decode.rs | 99.09% (3/328 missed) | 100.00% (0/19 missed) | 99.42% (1/171 missed) | 87.50% (4/32 missed) |
| src/main.rs | 96.28% (24/646 missed) | 93.33% (2/30 missed) | 98.15% (6/325 missed) | 95.71% (3/70 missed) |
| src/markdown_renderer.rs | 96.32% (440/11951 missed) | 96.58% (20/584 missed) | 97.31% (200/7448 missed) | 80.28% (194/984 missed) |
| src/mermaid_renderer.rs | 74.03% (958/3689 missed) | 82.17% (28/157 missed) | 72.16% (585/2101 missed) | 43.61% (269/477 missed) |
| src/sample_files.rs | 100.00% (0/131 missed) | 100.00% (0/9 missed) | 100.00% (0/56 missed) | n/a (no branches) |
| src/table_support/column_spec.rs | 97.57% (31/1278 missed) | 95.59% (3/68 missed) | 99.26% (6/813 missed) | 89.22% (11/102 missed) |
| src/table_support/metrics.rs | 100.00% (0/304 missed) | 100.00% (0/27 missed) | 100.00% (0/178 missed) | 100.00% (0/20 missed) |
| src/window_state.rs | 98.61% (8/575 missed) | 100.00% (0/33 missed) | 99.34% (2/301 missed) | 85.71% (4/28 missed) |

## Generated Code in Coverage Output
- `target/llvm-cov-target/.../egl_bindings.rs` and `.../wgl_extra_bindings.rs` show 0% coverage (generated bindings under `glutin_*_sys`).
- Consider excluding generated files via `--ignore-filename-regex` for cleaner totals if desired.

## Observations
- Lowest branch coverage is in `src/mermaid_renderer.rs` (43.61%), suggesting unexercised error paths and feature-flag branches.
- `src/emoji_assets.rs` (73.53%) and `src/markdown_renderer.rs` (80.28%) are the next largest branch-coverage gaps.
- Overall branch coverage is 74.28%, with strong line coverage (92.75%).

## Potential Follow-ups
- Add targeted tests to cover `mermaid_renderer` error handling and fallback branches.
- Expand branch-focused tests in `emoji_assets` and `markdown_renderer` for conditional paths.
- If coverage tooling is run frequently, document the Windows `patch.exe` requirement or add a helper script to set PATH.
