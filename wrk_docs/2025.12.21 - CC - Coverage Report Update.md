# Coverage Report (2025-12-21)

## Run Details
- Command: `cargo llvm-cov --all --json --summary-only --output-path wrk_docs/coverage-current-summary.json`
- Tests: 156 total (152 library + 4 main)
- Notes: `cargo llvm-cov` includes generated OpenGL binding files under `target/llvm-cov-target` (not repo source).

## Overall Summary (all reported files)
- Lines: 7,180 / 8,232 (87.22%)
- Functions: 612 / 747 (81.93%)
- Regions: 11,819 / 14,084 (83.92%)
- Instantiations: 653 / 834 (78.30%)

## Repo Source Summary (src only)
- Lines: 7,180 / 7,988 (89.88%)
- Lines missing: 808

## File-level Line Coverage (src)
- `src/markdown_renderer.rs` — 3,519 / 4,043 (87.04%), 524 missing
- `src/app.rs` — 2,500 / 2,673 (93.53%), 173 missing
- `src/table_support/column_spec.rs` — 419 / 505 (82.97%), 86 missing
- `src/window_state.rs` — 135 / 159 (84.91%), 24 missing
- `src/main.rs` — 101 / 102 (99.02%), 1 missing
- `src/emoji_assets.rs` — 159 / 159 (100%)
- `src/emoji_catalog.rs` — 139 / 139 (100%)
- `src/sample_files.rs` — 51 / 51 (100%)
- `src/table_support/metrics.rs` — 157 / 157 (100%)

## Non-repo Files Included in Report
- `target/llvm-cov-target/.../egl_bindings.rs` — 0 / 154
- `target/llvm-cov-target/.../wgl_extra_bindings.rs` — 0 / 90

## Major Coverage Gaps
- `src/markdown_renderer.rs`
  - Missing coverage concentrated in list parsing/rendering, table rendering, mermaid paths, and inline span rendering (`parse_list`, `render_list`, `parse_table`, `render_table_tablebuilder`, `render_mermaid_block`, `render_inline_span`, `render_code_block`, `element_plain_text`, `to_superscript`).
- `src/app.rs`
  - Gaps in keyboard shortcut branches, file-drop error handling, history navigation edge cases, and status/search dialog branches (`handle_shortcuts`, `handle_file_drop`, `navigate_forward`, `restore_from_history`, `render_search_dialog`, `render_status_bar`).
- `src/table_support/column_spec.rs`
  - Heuristic and formatting helpers untested (`header_text`, `spans_to_text`, `ColumnPolicy::to_column`, `apply_preferred_width`, `classify_column`, `column_tooltip`).
- `src/window_state.rs`
  - Config path fallback logic and env handling untested (`config_dir`, `save_window_state` when config dir missing).

## Observations
- Renderer/UI-heavy code paths dominate the remaining gaps; focused unit tests can cover many lines quickly.
- Generated binding files in `target/` depress overall coverage; for repo-only tracking, exclude `target/` paths.
